{% autoescape false %}
<?php

# Settings.
//$settings['container_yamls'][] = DRUPAL_ROOT . '/sites/development.services.yml';
//$settings['cache']['default'] = 'cache.backend.null';
$settings['extension_discovery_scan_tests'] = TRUE;
$settings['file_chmod_directory'] = 0775;
$settings['file_chmod_file'] = 0664;
$settings['hash_salt'] = '{{ hash_salt }}';

# Redis cache
if (constant("MAINTENANCE_MODE") != 'install') {
  $settings['container_yamls'][] = DRUPAL_ROOT . '/sites/default/redis.services.yml';

  $settings['redis.connection']['interface'] = 'PhpRedis';
  $settings['redis.connection']['host'] = '{{ redis_host }}';
  $settings['cache_prefix'] = '{{ site_nameÂ }}_';
  $settings['cache']['default'] = 'cache.backend.redis';

  $settings['cache']['bins']['bootstrap'] = 'cache.backend.chainedfast';
  $settings['cache']['bins']['discovery'] = 'cache.backend.chainedfast';
  $settings['cache']['bins']['config'] = 'cache.backend.chainedfast';
}

// Additional module to enable during installation.
$settings['additional_modules'] = {{ additional_modules }};

// Custom settings to ignore some configuration
// provided by modules on export.
$settings['config_export_blacklist_module'] = {{ config_export_blacklist_module }};

// Custom settings to ignore some configuration on export.
$settings['config_export_blacklist_config'] = {{ config_export_blacklist_config }};

# Databases.
$databases['default']['default'] = array(
    'driver' => 'mysql',
    'database' => '{{ db_name }}',
    'username' => '{{ db_user }}',
    'password' => '{{ db_pass }}',
    'host' => '{{ db_host }}',
    'port' => 3306,
    'prefix' => '',
    'collation' => 'utf8mb4_general_ci',
    'namespace' => 'Drupal\\Core\\Database\\Driver\\mysql',
);

# Override config entities.
$config['system.logging']['error_level'] = '{{ error_level }}';
$config['system.performance']['css']['preprocess'] = {{ css_preprocess }};
$config['system.performance']['js']['preprocess'] = {{ js_preprocess }};
$config['system.performance']['cache.page.max_age'] = {{ cache_maxage }};

$settings['trusted_host_patterns'] = {{ trusted_host_patterns }};

# Config directories
$config_directories = array(
    CONFIG_SYNC_DIRECTORY => getcwd() . '/../config/'
);
{% endautoescape %}
